<!doctype html>
<html>
<body>
<h2>Enter OTP</h2>
<form id="f">
<input name="otp" placeholder="6-digit OTP" required /> <br>
<button>Verify</button>
</form>
<div id="msg"></div>
<script>
const f = document.getElementById('f');
f.addEventListener('submit', async e => {
e.preventDefault();
const identifier = localStorage.getItem('identifier');
if (!identifier) return document.getElementById('msg').innerText = 'Missing identifier. Go back to login.';
const data = { identifier, otp: new FormData(f).get('otp') };
const r = await fetch('/api/verify-otp', { method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify(data)});
const j = await r.json();
if (r.ok) {
window.location = '/dashboard.html';
} else {
document.getElementById('msg').innerText = j.error || 'Error';
}
});
</script>
</body>
</html>